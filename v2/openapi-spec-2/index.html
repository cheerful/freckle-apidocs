{
  "swagger": "2.0",
  "info": {
    "title": "Noko API v2",
    "description": "The JSON API for Noko Time Tracking",
    "termsOfService": "http://nokotime.com/terms/",
    "contact": {
      "name": "API Support",
      "url": "http://developer.nokotime.com",
      "email": "support@nokotime.com"
    },
    "version": "0.0.1"
  },
  "host": "api.nokotime.com",
  "basePath": "/v2/",
  "schemes": [
    "https"
  ],
  "paths": {
    "/entries": {
      "get": {
        "summary": "Get all entries, sorted by the most recent entry date.",
        "operationId": "list-entries",
        "parameters": [
          {
            "name": "user_ids",
            "in": "query",
            "description": "A comma-separated list of user IDs to filter by",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "A paged array of entries",
            "schema": {
              "$ref": "#/definitions/Entries"
            }
          }
        },
        "tags": [
          "Entries"
        ]
      }
    },
    "/projects": {
      "get": {
        "summary": "List all projects the authenticated user has access to.",
        "operationId": "list-projects",
        "parameters": [
          {
            "name": "name",
            "in": "query",
            "description": "Only projects containing this text in their name are returned.",
            "required": false,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "A paged array of projects",
            "schema": {
              "$ref": "#/definitions/Projects"
            }
          }
        },
        "tags": [
          "Projects"
        ]
      }
    },
    "/projects/#{id}": {
      "get": {
        "summary": "Get a single project",
        "operationId": "get-project",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "The ID of the project to retrieve",
            "required": true,
            "type": "integer"
          }
        ],
        "responses": {
          "200": {
            "description": "A single project",
            "schema": {
              "$ref": "#/definitions/Project"
            }
          }
        },
        "tags": [
          "Projects"
        ]
      }
    },
    "/webhooks": {
      "post": {
        "operationId": "add-webhook",
        "summary": "Create a Webhook to listen to events from Noko",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/NewWebhook"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Webhook successfully created",
            "schema": {
              "$ref": "#/definitions/Webhook"
            }
          }
        },
        "tags": [
          "Webhooks"
        ]
      }
    }
  },
  "security": [
    {
      "oauth2": [

      ],
      "personal_access_token": [

      ]
    }
  ],
  "definitions": {
    "Entry": {
      "description": "Entry",
      "type": "object",
      "required": [
        "id",
        "date",
        "minutes"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "integer",
          "example": 1234
        },
        "date": {
          "type": "string",
          "format": "date"
        },
        "minutes": {
          "type": "integer",
          "format": "integer",
          "description": "The number of minutes logged in this time entry. This number will automatically be rounded up based on the project's `billing_increment` settings. If no value is provided, then the entry will have `0` minutes."
        },
        "user": {
          "$ref": "#/definitions/UserSummary"
        },
        "project": {
          "$ref": "#/definitions/ProjectSummary"
        },
        "description": {
          "type": "string",
          "description": "The description of the time entry, including any hashtags."
        },
        "tags": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Tag"
          }
        },
        "approved_by": {
          "$ref": "#/definitions/UserSummary"
        }
      },
      "example": {
        "id": 1,
        "date": "2012-01-09",
        "user": {
          "id": 5538,
          "email": "john.test@test.com",
          "first_name": "John",
          "last_name": "Test",
          "profile_image_url": "https://api.nokotime.com/images/avatars/0000/0001/avatar.jpg",
          "url": "https://api.nokotime.com/v2/users/5538"
        },
        "billable": true,
        "minutes": 60,
        "description": "noko",
        "project": {
          "id": 37396,
          "name": "Gear GmbH",
          "billing_increment": 10,
          "enabled": true,
          "billable": true,
          "color": "#ff9898",
          "url": "https://api.nokotime.com/v2/projects/37396"
        },
        "tags": [
          {
            "id": 249397,
            "name": "noko",
            "billable": true,
            "formatted_name": "#noko",
            "url": "https://api.nokotime.com/v2/tags/249397"
          }
        ],
        "source_url": "http://someapp.com/special/url/",
        "invoiced_at": "2012-01-10T08:33:29Z",
        "invoice": {
          "id": 12345678,
          "reference": "AA001",
          "invoice_date": "2013-07-09",
          "state": "unpaid",
          "total_amount": 189.33,
          "url": "https://api.nokotime.com/v2/invoices/12345678"
        },
        "import": {
          "id": 8910,
          "url": "https://api.nokotime.com/v2/imports/8910"
        },
        "approved_at": "2012-01-10T08:33:29Z",
        "approved_by": {
          "id": 5538,
          "email": "john.test@test.com",
          "first_name": "John",
          "last_name": "Test",
          "profile_image_url": "https://api.nokotime.com/images/avatars/0000/0001/avatar.jpg",
          "url": "https://api.nokotime.com/v2/users/5538"
        },
        "url": "https://api.nokotime.com/v2/entries/1711626",
        "invoiced_outside_of_noko_url": "https://api.nokotime.com/v2/entries/1711626/marked_as_invoiced",
        "approved_url": "https://api.nokotime.com/v2/entries/1711626/approved",
        "unapproved_url": "https://api.nokotime.com/v2/entries/1711626/unapproved",
        "created_at": "2012-01-09T08:33:29Z",
        "updated_at": "2012-01-09T08:33:29Z"
      }
    },
    "Entries": {
      "description": "The list of entries from Noko",
      "type": "array",
      "items": {
        "$ref": "#/definitions/Entry"
      }
    },
    "Project": {
      "description": "A Project in Noko",
      "type": "object",
      "required": [
        "id",
        "name",
        "enabled",
        "billing_increment",
        "color",
        "billable"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "integer",
          "example": 1234
        },
        "name": {
          "type": "string",
          "example": "Gear GmbH"
        },
        "enabled": {
          "type": "boolean"
        },
        "billing_increment": {
          "$ref": "#/definitions/BillingIncrement"
        },
        "color": {
          "type": "string",
          "format": "CSS Hexadecimal color",
          "example": "#ff9898"
        },
        "billable": {
          "type": "boolean"
        },
        "project_group": {
          "$ref": "#/definitions/ProjectGroupSummary"
        }
      }
    },
    "Projects": {
      "description": "The list of projects from Noko",
      "type": "array",
      "items": {
        "$ref": "#/definitions/Project"
      }
    },
    "ProjectGroupSummary": {
      "description": "A Summary of a Project Group",
      "required": [
        "id",
        "name"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "integer",
          "example": 1234
        },
        "name": {
          "type": "string",
          "example": "Sprockets, Inc."
        }
      }
    },
    "UserSummary": {
      "description": "A Summary of a User",
      "type": "object",
      "required": [
        "id",
        "email"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "integer",
          "example": 1234
        },
        "email": {
          "type": "string",
          "format": "email",
          "example": "john.test@test.com"
        }
      }
    },
    "ProjectSummary": {
      "description": "A Summary of a Project",
      "type": "object",
      "required": [
        "id",
        "name",
        "enabled",
        "billing_increment",
        "color",
        "billable"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "integer",
          "example": 1234
        },
        "name": {
          "type": "string",
          "example": "Gear GmbH"
        },
        "enabled": {
          "type": "boolean"
        },
        "billing_increment": {
          "$ref": "#/definitions/BillingIncrement"
        },
        "color": {
          "type": "string",
          "format": "CSS Hexadecimal color",
          "example": "#ff9898"
        },
        "billable": {
          "type": "boolean"
        }
      }
    },
    "Tag": {
      "required": [
        "id",
        "name",
        "billable",
        "formatted_name"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "integer",
          "example": 1234
        },
        "name": {
          "type": "string"
        },
        "billable": {
          "type": "boolean"
        },
        "formatted_name": {
          "type": "string"
        }
      },
      "example": {
        "id": 249397,
        "name": "noko",
        "billable": true,
        "formatted_name": "#noko",
        "url": "https://api.nokotime.com/v2/tags/249397",
        "import": {
          "id": 8910,
          "url": "https://api.nokotime.com/v2/imports/8910"
        },
        "entries": 0,
        "entries_url": "https://api.nokotime.com/v2/tags/55629/entries",
        "merge_url": "https://api.nokotime.com/v2/tags/55629/merge",
        "created_at": "2010-06-09T20:44:57Z",
        "updated_at": "2010-06-09T20:44:57Z"
      }
    },
    "BillingIncrement": {
      "type": "string",
      "description": "The billing increment used by this project. The default value is the account's default billing increment (which is `15` by default).",
      "enum": [
        1,
        5,
        6,
        10,
        15,
        2,
        30,
        60
      ],
      "default": 15
    },
    "WebhookEvent": {
      "type": "string",
      "enum": [
        "entry.created",
        "entry.updated",
        "entry.deleted",
        "entry.updated.approved",
        "entry.updated.unapproved",
        "entry.updated.invoiced",
        "entry.updated.uninvoiced",
        "tag.created",
        "tag.updated",
        "tag.deleted",
        "tag.deleted.merged",
        "*"
      ],
      "default": "*"
    },
    "NewWebhook": {
      "description": "A new Webhook to subscribe to Noko",
      "required": [
        "id",
        "name",
        "payload_uri",
        "events"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "integer",
          "example": 1234
        },
        "name": {
          "description": "The name of the Webhook",
          "type": "string",
          "example": "Da Best Noko Webhook"
        },
        "payload_uri": {
          "description": "The URI to send the payloads to",
          "type": "string",
          "format": "uri",
          "example": "http://dabestnokoapp.com/webhooks/entry_events"
        },
        "events": {
          "description": "The events this webhook should be subscribed to. You can also specify `'*'`, which is a wildcard for all current and future events.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/WebhookEvent"
          }
        }
      }
    },
    "Webhook": {
      "description": "A Webhook",
      "required": [
        "id",
        "name",
        "payload_uri"
      ],
      "properties": {
        "id": {
          "type": "integer",
          "format": "integer",
          "example": 1234
        },
        "name": {
          "description": "The name of the Webhook",
          "type": "string",
          "example": "Da Best Noko Webhook"
        },
        "payload_uri": {
          "description": "The URI to send the payloads to",
          "type": "string",
          "format": "uri",
          "example": "http://dabestnokoapp.com/webhooks/entry_events"
        }
      },
      "example": {
        "id": 123456,
        "name": "Da Best Noko Webhook",
        "state": "enabled",
        "events": [
          "entry.created",
          "entry.updated",
          "entry.deleted",
          "entry.updated.approved",
          "entry.updated.unapproved",
          "entry.updated.invoiced",
          "entry.updated.uninvoiced"
        ],
        "payload_uri": "http://dabestnokoapp.com/webhooks/entry_events",
        "url": "https://api.nokotime.com/v2/webhooks/123456",
        "add_events_url": "https://api.nokotime.com/v2/webhooks/123456/add_events",
        "remove_events_url": "https://api.nokotime.com/v2/webhooks/123456/remove_events",
        "reroll_secret_url": "https://api.nokotime.com/v2/webhooks/123456/reroll_secret",
        "enable_url": "https://api.nokotime.com/v2/webhooks/123456/enable",
        "disable_url": "https://api.nokotime.com/v2/webhooks/123456/disable"
      }
    }
  },
  "securityDefinitions": {
    "oauth2": {
      "type": "oauth2",
      "flow": "accessCode",
      "authorizationUrl": "https://secure.nokotime.com/oauth/2/authorize",
      "tokenUrl": "https://secure.nokotime.com/oauth/2/access_token",
      "scopes": {
      }
    },
    "personal_access_token": {
      "type": "apiKey",
      "name": "X-NokoToken",
      "in": "header"
    }
  }
}